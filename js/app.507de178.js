(function(e){function t(t){for(var n,a,c=t[0],l=t[1],u=t[2],s=0,m=[];s<c.length;s++)a=c[s],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&m.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==o[c]&&(n=!1)}n&&(i.splice(t--,1),e=l(l.s=r[0]))}return e}var n={},a={app:0},o={app:0},i=[];function c(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"81739cff"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.e=function(e){var t=[],r={about:1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"9ddac486"}[e]+".css",o=l.p+n,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],s=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(s===n||s===o))return t()}var m=document.getElementsByTagName("style");for(c=0;c<m.length;c++){u=m[c],s=u.getAttribute("data-href");if(s===n||s===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete a[e],d.parentNode.removeChild(d),r(i)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=i);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=c(e);var m=new Error;u=function(t){s.onerror=s.onload=null,clearTimeout(d);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;m.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",m.name="ChunkLoadError",m.type=n,m.request=a,r[1](m)}o[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:s})}),12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/handy-explorer/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var m=0;m<u.length;m++)t(u[m]);var d=s;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"2fc7":function(e,t,r){"use strict";r("f759")},"3d49":function(e,t,r){"use strict";r("91e2")},"6f6b":function(e,t,r){"use strict";r("ae67")},"91e2":function(e,t,r){},ae67:function(e,t,r){},c956:function(e,t,r){"use strict";r("d616")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a={id:"nav"},o=Object(n["createTextVNode"])(" | ");function i(e,t,r,i,c,l){var u=Object(n["resolveComponent"])("router-link"),s=Object(n["resolveComponent"])("locale-changer"),m=Object(n["resolveComponent"])("router-view");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("div",a,[Object(n["createVNode"])(u,{to:"/"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("detailPage")),1)]})),_:1}),o,Object(n["createVNode"])(u,{to:"/about"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("about")),1)]})),_:1}),Object(n["createVNode"])(s)]),Object(n["createVNode"])(m)],64)}var c={class:"locale-changer"};function l(e,t,r,a,o,i){return Object(n["openBlock"])(),Object(n["createBlock"])("div",c,[Object(n["withDirectives"])(Object(n["createVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.$i18n.locale=t})},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(o.langs,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])("option",{key:"Lang".concat(t),value:e},Object(n["toDisplayString"])(o.ownName[e]),9,["value"])})),128))],512),[[n["vModelSelect"],e.$i18n.locale]])])}var u={name:"locale-changer",data:function(){return{langs:["de","en"],ownName:{de:"Deutsch",en:"English"}}}};u.render=l;var s=u,m=Object(n["defineComponent"])({components:{LocaleChanger:s}});r("6f6b");m.render=i;var d=m,p=(r("d3b7"),r("6c02")),f={class:"controls"},b={class:"chart"};function h(e,t,r,a,o,i){var c=Object(n["resolveComponent"])("ParameterControls"),l=Object(n["resolveComponent"])("LineChart");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("div",f,[Object(n["createVNode"])(c,{"initial-parameters":e.initialParams,onChange:e.updateParameters},null,8,["initial-parameters","onChange"])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])(l,{"chart-data":e.chartData},null,8,["chart-data"])])],64)}var v=r("5530"),g=Object(n["createVNode"])("br",null,null,-1);function j(e,t,r,a,o,i){var c=Object(n["resolveComponent"])("Slider");return Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.controls,(function(r){return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:r.key},[g,Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t(r.key))+" ",1),Object(n["createVNode"])(c,{modelValue:e.currentParameters[r.key],"onUpdate:modelValue":[function(t){return e.currentParameters[r.key]=t},t[1]||(t[1]=function(t){return e.$emit("change",e.currentParameters)})],step:r.step,min:r.min,max:r.max,color:r.onColor,"track-color":r.offColor,"tooltip-color":"#999",tooltip:!0},null,8,["modelValue","onUpdate:modelValue","step","min","max","color","track-color"])],64)})),128)}var O=r("1c69"),y=r.n(O),C=[{key:"birthRateCommoners",step:.001,min:0,max:.1,onColor:"#9924f4",offColor:"#bc7af4"},{key:"birthRateElites",step:.001,min:0,max:.1,onColor:"#2b5bf1",offColor:"#a8b9f0"},{key:"inequalityFactor",step:.25,min:1,max:100,onColor:"#decb12",offColor:"#f3eec1"},{key:"depletionPerWorker",step:1e-6,min:0,max:5e-4,onColor:"#8e842a",offColor:"#b3ad71"}],k=Object(n["defineComponent"])({name:"ParameterControls",components:{Slider:y.a},props:{initialParameters:{required:!0,type:Object}},emits:["change"],setup:function(){return{controls:C}},data:function(){return{currentParameters:this.initialParameters}}});r("2fc7");k.render=j;var P=k,x=(r("4de4"),r("d81d"),r("13d5"),r("d4ec")),w=r("bee2"),S=function(){function e(){Object(x["a"])(this,e)}return Object(w["a"])(e,[{key:"normalize",value:function(e){var t=e.reduce((function(e,t){return Math.max(e,t)}));return{normalized:e.map((function(e){return e/t})),maximum:t}}},{key:"runSimulation",value:function(e){for(var t=1,r=e.initialPopulationCommoners,n=e.initialPopulationElites,a=100,o=0,i=[],c=[],l=[],u=[],s=[],m=0;m<e.yearsToModel;m+=t){var d=e.minimumRequiredConsumptionPerCapita*(r+e.inequalityFactor*n),p=Math.min(1,o/d)*e.subsistenceSalaryPerCapita*r,f=Math.min(1,o/d)*e.inequalityFactor*e.subsistenceSalaryPerCapita*n,b=e.normalDeathRate+Math.max(0,1-p/(e.subsistenceSalaryPerCapita*r))*(e.famineDeathRate-e.normalDeathRate),h=e.normalDeathRate+Math.max(0,1-f/(e.subsistenceSalaryPerCapita*n))*(e.famineDeathRate-e.normalDeathRate),v=Math.max(0,r+t*(r*(e.birthRateCommoners-b))),g=Math.max(0,n+t*(n*(e.birthRateElites-h))),j=Math.max(0,a+t*(e.regenerationFactor*a*(e.natureCapacity-a)-e.depletionPerWorker*r*a)),O=Math.max(0,o+t*(e.depletionPerWorker*r*a-p-f));r=v,n=g,a=j,o=O,i.push(r),c.push(n),l.push(a),u.push(o),s.push(Math.round(m))}var y=this.normalize(i),C=y.normalized,k=y.maximum,P=this.normalize(c),x=P.normalized,w=P.maximum,S=this.normalize(l),N=S.normalized,D=this.normalize(u),E=D.normalized,V=Math.max(k,w),B=x.map((function(e){return e*w/V})),M=C.map((function(e){return e*k/V})),R=300,F=function(t,r){return r%(e.yearsToModel/R)};return{datasets:[M.filter(F),B.filter(F),N.filter(F),E.filter(F)]}}}]),e}(),N={birthRateCommoners:.03,birthRateElites:.03,inequalityFactor:10,depletionPerWorker:7e-6,minimumRequiredConsumptionPerCapita:.005,subsistenceSalaryPerCapita:5e-4,normalDeathRate:.0095,famineDeathRate:.07,natureCapacity:100,regenerationFactor:.01,yearsToModel:600,initialPopulationCommoners:100,initialPopulationElites:1},D={class:"chart-svg"};function E(e,t,r,a,o,i){return Object(n["openBlock"])(),Object(n["createBlock"])("svg",D)}r("a15b");var V=r("5698"),B=[{color:"red"},{color:"blue"},{color:"green"},{color:"yellow"}],M=Object(n["defineComponent"])({name:"LineChart",props:{chartData:{required:!0,type:Object}},setup:function(e){var t={top:5,right:15,bottom:25,left:25},r=400,a=300,o=function(){var o=V["e"](".chart-svg").attr("viewBox","0 0 ".concat(r," ").concat(a)).append("g"),i=V["d"]().domain([0,300]).range([t.left,r-t.right]),c=V["d"]().domain([0,1]).range([a-t.bottom,t.top]),l=V["c"]((function(e,t){return i(t)}),(function(e){return c(e)})),u=o.append("g");function s(e){u.selectAll("path").data(e.datasets).join("path").attr("class","line").attr("stroke",(function(e,t){return B[t].color})).attr("d",(function(e){return l(e)}))}o.append("g").attr("transform","translate(0,".concat(a-t.bottom,")")).call(V["a"](i)),o.append("g").attr("transform","translate(".concat(t.left,",0)")).call(V["b"](c)),Object(n["watchEffect"])((function(){return s(e.chartData)}))};return Object(n["onMounted"])(o),{draw:o}}});r("c956");M.render=E;var R=M,F=Object(n["defineComponent"])({components:{LineChart:R,ParameterControls:P},setup:function(){var e=Object(n["ref"])(Object(v["a"])({},N)),t=function(t){e.value=t},r=Object(n["computed"])((function(){return(new S).runSimulation(e.value)}));return{chartData:r,initialParams:N,updateParameters:t}}});r("3d49");F.render=h;var T=F,q=Object(p["a"])({history:Object(p["b"])("/handy-explorer/"),routes:[{path:"/",name:"detail",component:T},{path:"/about",name:"about",component:function(){return r.e("about").then(r.bind(null,"f820"))}}]}),L=(r("ac1f"),r("1276"),r("498a"),r("47e2")),A={de:{about:"Über-Seite",birthRateCommoners:"Geburtenrate der Arbeiter",birthRateElites:"Geburtenrate der Eliten",depletionPerWorker:"Erschöpfung pro Arbeiter",inequalityFactor:"Ungleichheitsfaktor",detailPage:"Ausführliche Simulation"},en:{about:"About",birthRateCommoners:"Workers birth rate",birthRateElites:"Elites birth rate",depletionPerWorker:"Depletion per worker",inequalityFactor:"Inequality factor",detailPage:"Interactive simulation"}};function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={trimCountryCode:!0},r=Object(v["a"])(Object(v["a"])({},t),e),n=void 0!==navigator.languages?navigator.languages[0]:navigator.language;if(n){var a=r.trimCountryCode?n.trim().split(/-|_/)[0]:n.trim();return a}}var z=Object(L["a"])({locale:_(),fallbackLocale:"en",messages:A});Object(n["createApp"])(d).use(q).use(z).mount("#app")},d616:function(e,t,r){},f759:function(e,t,r){}});
//# sourceMappingURL=app.507de178.js.map